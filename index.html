<html>
  <head>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://code.highcharts.com/highcharts.src.js"></script>
    <script>
      $(function(){
        var url = 'https://wex.nz/api/3/depth/btc_usd?limit=5000';
        $.ajax({
           url: url,
           dataType: 'jsonp',
        }).done(function(data){
          var asks = [], bids = [];
          var s = 0;
          for(var i in data.btc_usd.asks){
            s+=parseFloat(data.btc_usd.asks[i][1]);
            asks.push([data.btc_usd.asks[i][0], s]);
          }
          s = 0;
          for(var i in data.btc_usd.bids){
            s+=parseFloat(data.btc_usd.bids[i][1]);
            bids.push([data.btc_usd.bids[i][0], s]);
          }
          bids.reverse();
  
          Highcharts.chart('container', {
              chart: {zoomType: 'x'},
              title: {text: 'WEX BTC USD Depth'},
              subtitle: {text: document.ontouchstart === undefined ?'Click and drag in the plot area to zoom in' : 'Pinch the chart to zoom in'},
              xAxis: {title: {text: 'USD'}},
              yAxis: {min: 0, title: {text: 'BTC'}},
              legend: {enabled: false},
              plotOptions: {
                  area: {
                      fillColor: {
                          linearGradient: {
                              x1: 0,
                              y1: 0,
                              x2: 0,
                              y2: 1
                          },
                          stops: [
                              [0, Highcharts.getOptions().colors[0]],
                              [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
                          ]
                      },
                      marker: {
                          radius: 2
                      },
                      lineWidth: 1,
                      states: {
                          hover: {
                              lineWidth: 1
                          }
                      },
                      threshold: null
                  }
              },
              series: [{
                  type: 'area',
                  name: 'asks',
                  data: asks
              },{
                  type: 'area',
                  name: 'bids',
                  data: bids
              }]
          });
        });
      });
    </script>
  </head>
  <body>
    <div id="container" style="height: 95%;"></div>
    <div>
      <b>For donations:</B> BTC: 17RYvDqZKaHRZUPXdLp6UKrbyE2Cckkfss, ETH: 0xB0CAE7a8F8E5E10a736344bB25aFCd2ffA942146, BCH: qpr82cv6ss99wml694esmcmp70xtcfeyhc2pe9z8u6
    </div>
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter48429422 = new Ya.Metrika({
                        id:48429422,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true
                    });
                } catch(e) { }
            });

            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/watch.js";

            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/48429422" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
  </body>
</html>
